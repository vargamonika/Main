<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Python Kódok Gyűjteménye</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f4f4f4; }
        .code-container { background: #fff; border: 1px solid #ddd; border-left: 5px solid #2ecc71; padding: 15px; margin-bottom: 30px; border-radius: 5px; }
        pre { background: #272822; color: #f8f8f2; padding: 15px; overflow-x: auto; border-radius: 5px; }
        h2 { color: #333; border-bottom: 2px solid #2ecc71; padding-bottom: 5px; }
    </style>
</head>
<body>

    <h1>Python Feladatok és Megoldások</h1>

    <div class="code-container">
        <h2>1. CSV Beolvasás és Plot</h2>
        <p>Ez a kód beolvassa az akciós potenciál adatokat és kirajzolja a grafikont.</p>
        <pre><code>import matplotlib.pyplot as plt
import matplotlib.pyplot as plt

time=[]
ap1=[]
ap2=[]
ap3=[]
ap4=[]


with open ('ap.csv', 'r', encoding='utf-8') as f:
    next(f)
    for line in f:
        line = line.strip()
        if not line:
            continue

        data = line.strip().split(",")

        if len(data) < 5:
            continue

        try:
            time.append(float(data[0]))
            ap1.append(float(data[1]))
            ap2.append(float(data[2]))
            ap3.append(float(data[3]))
            ap4.append(float(data[4]))
        except (IndexError, ValueError):# Ha egy sor hibás vagy hiányzik adat, nem áll le a kód
            continue
    print(ap1)
    print(ap2)
    print(ap3)
    print(ap4)

plt.plot(time, ap1, label="AP1", color="green")
plt.plot(time, ap2, label="AP2", color="red")
plt.plot(time, ap3, label="AP3", color="blue")
plt.plot(time, ap4, label="AP4", color="yellow")
plt.xlabel("idő (ms)")
plt.ylabel("akciós potenciál(mV)")
plt.savefig('ábra1.png')
plt.show()

pozitiv_start_index=None
pozitiv_stop_index=None
pozitiv_tartomany=[]

for i in range(len(ap1)):
    if pozitiv_start_index==None and ap1[i]>=0:
        pozitiv_start_index=i
    if pozitiv_start_index!=None and ap1[i]<=0:
        pozitiv_stop_index=i-1

for pozitivak in ap1[pozitiv_start_index:(pozitiv_stop_index+1)]:
    pozitiv_tartomany.append(pozitivak)
print(pozitiv_tartomany)

#Legnagyobb és legkisebb AP
min_AP=min(ap1)
max_AP=max(ap1)
print(f"Legkisebb akciós potenciál {min_AP}")
print(f"legnagyobb akciós potenciál {max_AP}")

#pozitív százalék
pozitiv_db = 0

for ertek in ap1:
    if ertek > 0:
        pozitiv_db += 1

pozitiv_szazalek = pozitiv_db / len(ap1) * 100
print(f"Pozitív tartomány aránya: {pozitiv_szazalek:.2f} %")

#Mintavételi frekvencia
dt = time[1] - time[0]
mintaveteli_frekvencia = 1 / dt
print("Mintavételi frekvencia:", mintaveteli_frekvencia, "Hz")

#maximális sebesség
sebessegek = []

for i in range(len(ap1) - 1):
    seb = (ap1[i+1] - ap1[i]) / (time[i+1] - time[i])
    sebessegek.append(seb)

max_sebesseg = max(sebessegek, key=abs)
print("Legnagyobb sebesség:", max_sebesseg, "mV/ms")

#amplitúdó
amplitudo_ap1 = max(ap1) - min(ap1)
print("AP1 amplitúdó:", amplitudo_ap1)

#AP1 és AP2 időeltolódása
max_index_ap1 = ap1.index(max(ap1))
max_index_ap2 = ap2.index(max(ap2))

idoeltolodas = time[max_index_ap2] - time[max_index_ap1]

print("AP2 időeltolódása az első folyamathoz képest:", idoeltolodas, "ms")
</code></pre>
    </div>

    <div class="code-container">
        <h2>2. Egyenes illesztése (Replace)</h2>
        <pre><code>
import csv
import numpy as np
import matplotlib.pyplot as plt

# adatok beolvasása listákba
X = []
Y = []

with open("Illesztes.csv", "r", encoding="utf-8") as f:
    reader = csv.reader(f)
    next(reader)  # fejléc átugrása
    for row in reader:
        X.append(float(row[0]))
        Y.append(float(row[1]))

X = np.array(X)
Y = np.array(Y)
print(X)
print(Y)

# eredeti adatok ábrázolása
plt.scatter(X, Y, label="Mért adatok")

# lineáris illesztés
coeff = np.polyfit(X, Y, 1)
Y_fit = np.polyval(coeff, X)

# R2 számítása
y_atlag = sum(Y) / len(Y)

maradek_negyzetosszeg = 0
teljes_negyzetosszeg = 0

for i in range(len(Y)):
    maradek_negyzetosszeg += (Y[i] - Y_fit[i]) ** 2
    teljes_negyzetosszeg += (Y[i] - y_atlag) ** 2

r2 = 1 - maradek_negyzetosszeg / teljes_negyzetosszeg

# illesztett görbe
plt.plot(X, Y_fit, label=f"Illesztett egyenes (R²={r2:.2f})")

plt.xlabel("X")
plt.ylabel("Y")
plt.title("Adatok és lineáris illesztés")
plt.legend()
plt.show()

print("R² érték:", r2)
</code></pre>
    </div>
    <div class="code-container">
        <h2>3. Váltófutás Modellezés</h2>
        <p>Példa kód a váltófutás biomechanikai paramétereinek számításához.</p>
        <pre><code># Ide jön a 3. Python kódod...
</code></pre>
    </div>

    <div class="code-container">
        <h2>4. Statisztikai Számítások</h2>
        <p>Maximum és minimum értékek keresése az adatsorban.</p>
        <pre><code># Ide jön a 4. Python kódod...
</code></pre>
    </div>

</body>
</html>
